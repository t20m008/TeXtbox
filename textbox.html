<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- CSS only -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
  <!-- JavaScript Bundle with Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous">
  </script>

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.3/css/all.css"
    integrity="sha384-SZXxX4whJ79/gErwcOYf+zWLeJdY/qpuqC4cAa9rOGUstPomtqpuNWT9wdPEn2fk" crossorigin="anonymous">
  <!-- JQuery -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

  <script src="js/garlic.min.js"></script>

  <link href="https://fonts.googleapis.com/earlyaccess/nicomoji.css" rel="stylesheet">
  <style>
    .wf-nicomoji {
      font-family: "Nico Moji";
    }

    h1 {
      font-family: "Nico Moji";
      color: rgb(57, 124, 2);
    }
  </style>
  <title>TeXtbox</title>
</head>

<body>
  <div class="dropdown">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">
          <h1>TeXtbox</h1>
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDarkDropdown"
          aria-controls="navbarNavDarkDropdown" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavDarkDropdown">
          <ul class="navbar-nav">
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDarkDropdownMenuLink" role="button"
                data-bs-toggle="dropdown" aria-expanded="false">
                MENU
              </a>
              <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="navbarDarkDropdownMenuLink">
                <li><a class="dropdown-item" href="#">Action</a></li>
                <li><a class="dropdown-item" href="#">Another action</a></li>
                <li><a class="dropdown-item" href="#">Something else here</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </nav>
  </div>


  <div class="container-fluid mt-3">
    <div class="row row-cols-1">
      <div class="col-sm" id="column1">

        <!-- garlic.js -->
        <script>
          $(function () {
            $("form").garlic();
          });
        </script>

        <!-- <textarea class="m-form-textarea" id="input" name="text"></textarea>  -->
        <form data-persist="garlic" method="post">
          <textarea class="m-form-textarea" id="input" name="text"></textarea>
          <style>
            .m-form-textarea {
              resize: none;
              width: 100%;
              height: 150px;
              font-size: 25px;
            }
          </style>
        </form>

      </div>
      <div class="col-sm" id="column2">
        <div id="output" style="word-wrap: break-word; font-size:25px" ;>
        </div>
      </div>

    </div>
  </div>

  <!-- button -->
  <div class="container" id="btn-group">
    <div class="btn-toolbar mt-4" role="toolbar" aria-label="Toolbar with button groups">
      <div class="btn-group mr-2" role="group" aria-label="First group">
        <button type="button" class="btn btn-primary" onclick="clickBtn('clear')"><i
            class="fas fa-paper-plane">None</i></button>
      </div>
      <div class="btn-group mr-2" role="group" aria-label="First group">
        <button type="button" class="btn btn-danger" onclick="clickBtn('clear')"><i
            class="fas fa-trash-alt">clear</i></button>
      </div>
      <button type="button" class="btn btn-info" style="color: #FFF" onclick="clickBtn(' ')">␣space</button>
      <button type="button" class="btn btn-danger" onclick="clickBtn('backspace')"><i
          class="fas fa-backspace"></i></button>
    </div>
  </div>



  <div class="container">
    <div class="container mt-4" style="overflow: hidden;">

      <p>
        <a class="btn btn-success" data-bs-toggle="collapse" href="#multiCollapseExample1" role="button"
          aria-expanded="false" aria-controls="multiCollapseExample1" style="overflow: hidden;">
          あ
        </a>
        <button class="btn btn-primary" type="button" data-bs-toggle="collapse" data-bs-target="#multiCollapseExample2"
          aria-expanded="false" aria-controls="multiCollapseExample2">い</button>
      </p>
      <div class="row">
        <div class="col">
          <div class="collapse multi-collapse" id="multiCollapseExample1">
            <div class="card card-body">
              <!-- 数字 -->
              <div class="btn-toolbar mt-1" role="toolbar" aria-label="Toolbar with button groups">
                <div class="btn-group mr-2" role="group" aria-label="First group">
                  <button type="button" class="btn btn-secondary" onclick="clickBtn('0')">0</button>
                  <button type="button" class="btn btn-secondary" onclick="clickBtn('1')">1</button>
                  <button type="button" class="btn btn-secondary" onclick="clickBtn('2')">2</button>
                  <button type="button" class="btn btn-secondary" onclick="clickBtn('3')">3</button>
                  <button type="button" class="btn btn-secondary" onclick="clickBtn('4')">4</button>
                  <button type="button" class="btn btn-secondary" onclick="clickBtn('5')">5</button>
                  <button type="button" class="btn btn-secondary" onclick="clickBtn('6')">6</button>
                  <button type="button" class="btn btn-secondary" onclick="clickBtn('7')">7</button>
                  <button type="button" class="btn btn-secondary" onclick="clickBtn('8')">8</button>
                  <button type="button" class="btn btn-secondary" onclick="clickBtn('9')">9</button>
                </div>
              </div>

              <!--  -->
              <div class="btn-toolbar mt-1" role="toolbar" aria-label="Toolbar with button groups">
                <div class="btn-group mr-2" role="group" aria-label="First group">
                  <button id="mj-1" type="input" class="btn btn-secondary" onclick="clickBtn('+')">\(+\)</button>
                  <button id="mj-2" type="button" class="btn btn-secondary" onclick="clickBtn('-')">\(-\)</button>
                  <button id="mj-2" type="button" class="btn btn-secondary"
                    onclick="clickBtn('\\times ')">\(\times\)</button>
                  <button id="mj-2" type="button" class="btn btn-secondary"
                    onclick="clickBtn('\\div ')">\(\div\)</button>
                  <button type="button" class="btn btn-secondary" onclick="clickBtn('\\cdot ')">\(\cdot\)</button>
                  <button type="button" class="btn btn-secondary" onclick="clickBtn('\\pm ')">\(\pm\)</button>
                  <button type="button" class="btn btn-secondary" onclick="clickBtn('=')">\(=\)</button>
                </div>
              </div>

              <!--  -->
              <div class="btn-toolbar mt-1" role="toolbar" aria-label="Toolbar with button groups">
                <div class="btn-group mr-2" role="group" aria-label="First group">
                  <button type="button" class="btn btn-secondary"
                    onclick="clickBtn('\\frac{a}{b}')">\(\frac{a}{b}\)</button>
                  <button type="button" class="btn btn-secondary" onclick="clickBtn('\\sqrt{a}')">\(\sqrt{a}\)</button>
                  <button type="button" class="btn btn-secondary" onclick="clickBtn('^{2}')">\(□^{2}\)</button>
                  <button type="button" class="btn btn-secondary" onclick="clickBtn('^{3}')">\(□^{3}\)</button>
                  <button type="button" class="btn btn-secondary" onclick="clickBtn('^{n}')">\(□^{n}\)</button>
                  <button type="button" class="btn btn-secondary" onclick="clickBtn('f(x)')">\(f(x)\)</button>
                </div>
              </div>



              <!-- 文字 -->
              <div class="btn-toolbar mt-1" role="toolbar" aria-label="Toolbar with button groups">
                <div class="btn-group mr-2" role="group" aria-label="First group">
                  <button type="button" class="btn btn-secondary" onclick="clickBtn('a')">\(a\)</button>
                  <button type="button" class="btn btn-secondary" onclick="clickBtn('b')">\(b\)</button>
                  <button type="button" class="btn btn-secondary" onclick="clickBtn('n')">\(n\)</button>
                  <button type="button" class="btn btn-secondary" onclick="clickBtn('x')">\(x\)</button>
                  <button type="button" class="btn btn-secondary" onclick="clickBtn('y')">\(y\)</button>
                </div>
              </div>

              <!-- 文字 -->
              <div class="btn-toolbar mt-1" role="toolbar" aria-label="Toolbar with button groups">
                <div class="btn-group mr-2" role="group" aria-label="First group">
                  <button type="button" class="btn btn-secondary" onclick="clickBtn('\\alpha ')">\(\alpha\)</button>
                  <button type="button" class="btn btn-secondary" onclick="clickBtn('\\beta ')">\(\beta\)</button>
                  <button type="button" class="btn btn-secondary" onclick="clickBtn('\\theta ')">\(\theta\)</button>
                  <button type="button" class="btn btn-secondary" onclick="clickBtn('\\phi ')">\(\phi\)</button>
                  <button type="button" class="btn btn-secondary" onclick="clickBtn('e')">\(e\)</button>
                  <button type="button" class="btn btn-secondary" onclick="clickBtn('i')">\(i\)</button>
                  <button type="button" class="btn btn-secondary" onclick="clickBtn('\\pi ')">\(\pi\)</button>
                </div>
              </div>

              <div class="btn-toolbar mt-1" role="toolbar" aria-label="Toolbar with button groups">
                <div class="btn-group mr-2" role="group" aria-label="First group">
                  <button type="button" class="btn btn-secondary"
                    onclick="clickBtn('\\int_{a}^{b}')">\(\displaystyle{\int_{a}^{b}}\)</button>
                  <button type="button" class="btn btn-secondary"
                    onclick="clickBtn('\\oint_{a}^{b}')">\(\displaystyle{\oint_{a}^{b}}\)</button>
                  <button type="button" class="btn btn-secondary"
                    onclick="clickBtn('\\sum_{i=0}^{n}')">\(\displaystyle{\sum_{i=0}^{n}}\)</button>
                  <button type="button" class="btn btn-secondary"
                    onclick="clickBtn('\\prod_{i=0}^{n}')">\(\displaystyle{\prod_{i=0}^{n}}\)</button>
                  <button type="button" class="btn btn-secondary" onclick="clickBtn('dx')">\(dx\)</button>
                </div>
              </div>

              <div class="btn-toolbar mt-1" role="toolbar" aria-label="Toolbar with button groups">
                <div class="btn-group mr-2" role="group" aria-label="First group">
                  <button type="button" class="btn btn-secondary" onclick="clickBtn('\\left(')">\((\)</button>
                  <button type="button" class="btn btn-secondary" onclick="clickBtn('\\right)')">\()\)</button>
                  <button type="button" class="btn btn-secondary" onclick="clickBtn('\\left[')">\([\)</button>
                  <button type="button" class="btn btn-secondary" onclick="clickBtn('\\right]')">\(]\)</button>
                  <button type="button" class="btn btn-secondary" onclick="clickBtn('\\left\\{')">\(\{\)</button>
                  <button type="button" class="btn btn-secondary" onclick="clickBtn('\\right\\}')">\(\}\)</button>
                </div>
              </div>

              <div class="btn-toolbar mt-1" role="toolbar" aria-label="Toolbar with button groups">
                <div class="btn-group mr-2" role="group" aria-label="First group">
                  <button type="button" class="btn btn-secondary"
                    onclick="clickBtn('\\begin{bmatrix}a & b \\\\c & d \\end{bmatrix}')">\(\begin{bmatrix}a
                    & b \\c & d
                    \end{bmatrix}\)</button>
                  <button type="button" class="btn btn-secondary"
                    onclick="clickBtn('\\begin{cases}a & x = 0\\\\b & x > 0\\end{cases}')">\(\begin{cases}a
                    & x = 0\\b & x >
                    0\end{cases}\)</button>

                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col">
          <div class="collapse multi-collapse" id="multiCollapseExample2">
            <div class="card card-body">
              Some placeholder content for the second collapse component of this multi-collapse example.
              This
              panel is hidden by default but revealed when the user activates the relevant trigger.
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>



  <footer class="footer">
    <div class="container">
      <p class="text-muted"><a href="//kiwi.hig3.net" style="text-decoration: none; color: #635a5a;">kiwi.hig3.net</a>
      </p>
    </div>
  </footer>
  <style>
    /* Sticky footer styles
-------------------------------------------------- */
    html {
      position: relative;
      min-height: 100%;
    }

    body {
      /* Margin bottom by footer height */
      margin-bottom: 60px;
    }

    .footer {
      position: absolute;
      bottom: 0;
      width: 100%;
      /* Set the fixed height of the footer here */
      height: 60px;
      background-color: #f5f5f5;
    }


    /* Custom page CSS
-------------------------------------------------- */
    /* Not required for template or sticky footer method. */

    .container {
      width: auto;
      max-width: 680px;
      padding: 0 15px;
    }

    .container .text-muted {
      margin: 20px 0;
    }
  </style>

  <!-- MathJax -->
  <script>
    MathJax = {
      tex: {
        inlineMath: [
          ['$', '$'],
          ['\\(', '\\)']
        ]
      }
    };
  </script>
  <script type="text/javascript" id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <!-- MathJax Typeset -->
  <script>
    $(function () {
      $("#html").on("load", function () {
        $("#output").html('\\[' + $("#input").val() + '\\]');
        MathJax.typeset([document.getElementById("output")]);
      });

      $("#input").on("input", function () {
        //$("#output").html($("#input").val());
        $("#output").html('\\[' + $("#input").val() + '\\]');
        //MathJax.Hub.Typeset($("#output")[0], function () {console.log("Done");});
        MathJax.typeset([document.getElementById("output")]);
      });

      $("button").on("click", function () {
        $("#output").html('\\[' + $("#input").val() + '\\]');
        //MathJax.Hub.Typeset($("#output")[0], function () {console.log("Done");});
        MathJax.typeset([document.getElementById("output")]);
      });
    });
  </script>

  <!--  -->
  <!-- ボタンクリック時の処理 -->
  <script>
    function clickBtn(str) {
      //テキストエリアと挿入する文字列を取得
      var area = document.getElementById('input');
      let as = area.selectionStart;
      var text = str;

      if (str == 'clear') {
        area.value = '';
        area.focus();
        area.blur();
      } else if (str == 'backspace') {
        let a = area.value;
        area.value = a.substr(0, as - 1) + a.substr(as);
        area.setSelectionRange(as - 1, as - 1);
        area.focus();
        area.blur();
      } else {
        //カーソルの位置を基準に前後を分割して、その間に文字列を挿入
        area.value = area.value.substr(0, as) + text + area.value.substr(as);

        area.setSelectionRange(as + text.length, as + text.length);
        area.focus();
        area.blur();

      }
    }
  </script>

</body>

</html>